<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="5NzYWNH5_YUg0dUV2iCzg_bSo7M1lLJi6IzOeF2dGXM" />
    <title>モスロギア 神託のメソロギア デッキメーカー</title>
    <link href="favicon.ico" rel="icon" type="image/png" />
    <!-- 検索キーワード -->
    <meta name="keywords" content=
    "カードゲーム,デッキメーカー,DCG,神託のメソロギア,メソロギア,神託,デッキ分析,一覧,モスロギア">
    <!-- ページの説明（検索結果の下に表示） -->
    <meta name="description" content=
    "このサイトは、アプリ「神託のメソロギア」のカード一覧、デッキ構築、デッキ分析ができる非公式サイトです。カード検索やデッキ管理をスマホでも快適に！">


        <!-- OGP基本 -->
        <meta property="og:title" content="モスロギア | 神託のメソロギア デッキメーカー">
        <meta property="og:description" content="このサイトはアプリ「神託のメソロギア」のカード検索・デッキ構築ができる非公式サイトです。">
        <meta property="og:image" content="https://mosurogia.github.io/mesorogia-cards/img/deckmakerogp.webp">
        <meta property="og:url" content="https://mosurogia.github.io/mesorogia-cards/">
        <meta property="og:type" content="website">

        <!-- Twitterカード向け -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="モスロギア | 神託のメソロギア デッキメーカー">
        <meta name="twitter:description" content="カード検索とデッキ構築で神託のメソロギアをもっと楽しもう！">
        <meta name="twitter:image" content="https://mosurogia.github.io/mesorogia-cards/img/deckmakerogp.webp">


    <!-- CSS -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/common-page12.css">
    <link rel="stylesheet" href="css/common-page23.css">
    <link rel="stylesheet" href="css/page2.css">

<!--棒グラフ外部リソース-->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

<!--画像生成-->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>

<body>
<!-- ヘッダー -->
<header class="main-header">
    <div class="header-logo">
        <img src="img/tatudosi.webp" alt="神託のメソロギア ロゴ" />
    </div>
    <nav class="header-nav">
        <a href="index.html">📖 一覧</a>
        <a href="deckmaker.html">🃏 デッキメーカー</a>
        <a href="cardcheker.html">📊 所持率チェッカー</a>
        <a href="#" style="text-decoration: line-through; pointer-events: none; color: #aaa;">📤 デッキ投稿</a>
        <!--<a href="deck-post.html">📤 デッキ投稿</a>-->
    </nav>
</header>

<!--タブ切り替え-->
<div class="tab-bar">
    <div id="tab1" class="tab active" onclick="switchTab('build', this)">
        <span>🃏 デッキ構築</span>
    </div>
    <div id="tab2" class="tab" onclick="switchTab('edit', this)">
        <span>💾 デッキ分析</span>
    </div>
</div>

<!--デッキ構築タブ-->
<div class="tab-content active" id="build">

    <!--メニューバー＆デッキバー上部固定用-->
    <div class="fixed-top-bar">
        <!--メニューバー-->
        <div class="search-bar">
            <input id="keyword" oninput="applyFilters()" placeholder="カード検索" type="text">
            <button id="toggleOwnedBtn" onclick="toggleOwned()">所持カード未反映</button>
            <select id="sort-select" onchange="sortCards()">
                <option value="default">通常順</option>
                <option value="cost-asc">コスト昇順</option>
                <option value="cost-desc">コスト降順</option>
                <option value="power-asc">パワー昇順</option>
                <option value="power-desc">パワー降順</option>
                <option value="category-order">カテゴリ順</option>
            </select>
            <button onclick="openFilterModal()">📊 フィルター</button>
        </div>

        <!--フィルターモーダル-->
        <div class="modal" id="filterModal">
            <div class="modal-content">
                <div id="main-filters">

                </div>
                <div>
                    <button style="width: 100%;" onclick="toggleDetailFilters()">さらに詳しく絞り込む</button>
                    <div id="detail-filters" style="display: none;">

                    </div>

                </div>
                <div style="margin-top: 0.8vw;">
                    <button class="modal-buttun" id="applyFilterBtn">この条件で絞り込む</button>
                    <button class="modal-buttun" onclick="resetFilters()">リセット</button>
                </div>
            </div>
        </div>

<!--デッキバー-->
<!-- 🔽 デッキバー全体のラッパーを追加 -->
<div class="deck-bar-wrapper">
    <div class="deck-bar-scroll">
        <div class="deck-bar-content">
            <div class="deck-bar-top" id="deckBarTop">
                <div id="deck-empty-text">
                    <div style="font-size: 0.7rem;">カード操作</div>
                    <div class="deck-help" id="deckHelp">
                        <div>
                            【PC】<br>
                            ・左クリック：追加<br>
                            ・右クリック：削除<br>
                        </div>
                        <div>
                            【スマホ】<br>
                            ・タップ,上フリック：追加<br>
                            ・下フリック：削除<br>
                            ・長押し：拡大表示
                        </div>
                    </div>
                </div>
                <!-- JSでカードが並ぶ -->
            </div>
        </div>
    </div>

    <div class="deck-summary" id="deck-summary">
        <div class="deck-info"></div>
        <div class="analyze-button-wrapper">
            <button class="analyze-button" onclick="goToAnalyzeTab()">分析</button>
            <button class="analyze-button" id="resetDeckButton">リセット</button>
        </div>
    </div>

    <button class="deck-summary-toggle" onclick="toggleDeckSummary()">◀</button>
</div>


<!--使用不可種族表示非表示ボタン-->
<div class="deck-filter-bar">
    <button id="toggle-invalid-race" class="filter-toggle-button">✅使用不可種族を表示(モノクロ)</button>
</div>

</div>


<!--上部に戻るボタン-->
    <button id="scrollTopFixed" onclick="scrollToTop()">▲</button>

    <!--カード一覧-->
    <div class="grid" id="grid">

    </div>


<!-- カード拡大モーダル（画像のみ） -->
<div id="cardZoomModal" class="modal" style="display:none;">
    <div class="modal-content card-zoom" style="position:relative">
        <button id="cardZoomClose" aria-label="閉じる"
            style="position:absolute;right:.5rem;top:.5rem;font-size:1.25rem;">×</button>
        <img id="zoomImage" alt=""
            style="max-width:90vw;max-height:85vh;object-fit:contain;display:block;margin:auto;" />
    </div>
</div>


</div>

<!--デッキ編集タブ-->
<div class="tab-content" id="edit">
    <div id="deck-layout">
        <!--デッキリストゾーン-->
        <div id="deck-card-list" class="deck-section">
            <div id="deckcard-empty-message">デッキがここに表示されます</div>
            <!-- カード一覧（5列グリッド） -->
        </div>

        <!--デッキ情報ゾーン-->
        <div id="deck-info" class="deck-section">
            <!-- サブタブ -->
            <div class="tab-bar subtab-bar">
                <div class="tab active" onclick="switchTab('info-tab', this)"><span>📋 デッキ情報</span></div>
                <div class="tab" onclick="switchTab('post-tab', this)"><span>📤 デッキ投稿</span></div>
            </div>

            <!--タブ内-->
            <div class="tab-contents-group">
                <!-- デッキ情報タブ -->
                <div class="tab-content active" id="info-tab">

                    <!-- デッキ名入力欄 -->
                    <div class="deck-name-row">
                        <input type="text" id="deck-name" placeholder="デッキ名を入力" />
                    </div>

                    <!-- デッキ枚数 -->
                    <div class="deck-count">
                        <label>
                        デッキ枚数：<span id="deck-count">0</span> /30~40
                        </label>
                    </div>

                    <!-- 使用種族 -->
                    <div class="deck-race">
                        <label>
                        使用種族：<span id="deck-races">未選択</span>
                        </label>
                    </div>

                    <!-- 旧神状況 -->
                    <div class="deck-eldergod">
                        <label>
                        旧神：<span id="deck-eldergod">未採用</span>
                        </label>
                    </div>

                    <!-- 代表カード -->
                    <div class="deck-representative">
                        <label>
                        代表カード：<span id="deck-representative">未選択</span>
                        </label>
                        <div style="font-size: 14px;">タップで変更可能</div>

                    </div>

                    <!-- 使用タイプ内訳 -->
                    <div class="deck-type-breakdown">
                        <label>
                        <span class="type-count">🔵 チャージャー：<span id="count-charger">0</span></span><br>
                        <span class="type-count">🟣 アタッカー：<span id="count-attacker">0</span></span><br>
                        <span class="type-count">⚪️️️️️ ブロッカー：<span id="count-blocker">0</span></span>
                        </label>
                    </div>

                    <!-- 交換ポイント -->
                    <div class="exchange-summary" style="margin-top: 0.5rem; font-size: 0.85rem;">
                        <button id="exchange-toggle-btn" onclick="toggleExchange()">🟢 ポイント</button>
                        <div id="exchange-point">🟢 必要ポイント：<span id="point-cost">0</span></div>
                        <div id="exchange-diamond" style="display:none;">💎 必要ダイヤ：<span id="diamond-cost">0</span></div>
                        <div id="exchange-sand" style="display:none;">
                            🪨 必要砂
                            <ul style="margin: 0.2rem 0 0 0.5rem;">
                                <li>レジェンドの砂：<span id="sand-leg">0</span>個</li>
                                <li>ゴールドの砂：<span id="sand-gld">0</span>個</li>
                                <li>シルバーの砂：<span id="sand-sil">0</span>個</li>
                                <li>ブロンズの砂：<span id="sand-bro">0</span>個</li>
                            </ul>
                        </div>
                        <div style="font-size: 14px;">※所持率チェッカーでの所持データをもとに計算しています</div>
                    </div>

                    <!-- 不足カード -->
                    <div id="shortage-block">
                        <div><strong>不足カード：</strong></div>
                        <div id="shortage-list"></div>
                    </div>

                    <!-- デッキ分析 -->
                    <button id="toggle-analysis-btn" onclick="toggleAnalysis()">🔍 分析を表示</button>
                    <div id="analysis-section" class="deck-analysis" style="margin-top: 0.5rem; font-size: 0.85rem;">
                        <div>
                            <strong>レアリティ内訳：</strong>
                            <span id="rarity-legend">🌈0</span> /
                            <span id="rarity-gold">🟡 0</span> /
                            <span id="rarity-silver">⚪️ 0</span> /
                            <span id="rarity-bronze">🟤 0</span>
                        </div>
                        <div>
                            <strong>メイン種族率：</strong>
                            <span id="race-rate"> 0%</span>
                        </div>
                        <div class="chart">
                            <strong>コスト分布：</strong>
                            <canvas id="costChart"></canvas>
                        </div>
                        <div class="chart">
                            <strong>パワー分布：</strong>
                            <canvas id="powerChart"></canvas>
                        </div>
                        <div>
                            <strong>総コスト：</strong><span id="total-cost">0</span>
                            <strong>総パワー：</strong><span id="total-power">🔵0 / 🟣0</span>
                        </div>
                        <div>
                            <label for="mulligan-count">マリガン枚数：</label>
                            <select id="mulligan-count">
                                <option value="0" selected>マリガンなし</option>
                                <option value="1">1枚マリガン</option>
                                <option value="2">2枚マリガン</option>
                                <option value="3">3枚マリガン</option>
                                <option value="4">4枚マリガン</option>
                            </select>
                            <strong>初手事故率：</strong>
                            <span id="bad-hand-rate">0.0%</span>
                            <span id="bad-hand-frequency">（ほぼ事故なし）</span>
                            <div style="font-size: 14px;">※４コス以下のカードが初手に１枚も来ない確率</div>
                        </div>
                    </div>

                    <!-- 出力・保存 -->
                    <div class="deck-code-controls">
                        <button onclick="saveDeckToLocalStorage()">💾デッキ保存</button>
                        <button id="resetDeckButton">デッキリセット</button>
                        <button id="exportPngBtn">画像生成</button>
                    </div>
                    <!-- 👆ここまで“元の #deck-info 中身” -->
                </div>

                <!-- デッキ投稿タブ -->
                <div class="tab-content" id="post-tab">
                    <form id="deck-post-form" onsubmit="submitDeckPost(event)">
                        <div style="display:grid; gap:.5rem; max-width:520px;">
                            <label>
                                デッキ名（必須）
                                <input type="text" id="post-deck-name" placeholder="デッキ名" required />
                            </label>

                            <label>
                                コメント（任意）
                                <textarea id="post-comment" rows="4" placeholder="コンセプト、回し方、注意点など"></textarea>
                            </label>

                            <label>
                                タグ（複数可）
                                <div id="post-tags" class="tag-chips">
                                    <!-- JSで候補を生成（例：アグロ/コントロール/コンボ/初心者向け/格安/旧神/高速…） -->
                                </div>
                            </label>

                            <div class="post-summary">
                                <div>📦 枚数：<span id="post-deck-count">0</span></div>
                                <div>🧬 種族：<span id="post-deck-races">-</span></div>
                                <div>⭐ レア内訳：<span id="post-rarity">-</span></div>
                                <div>🃏 代表：<span id="post-representative">-</span></div>
                            </div>

                            <div class="post-opts">
                                <label><input type="checkbox" id="post-include-image" checked /> 画像も保存（後で一覧に使う想定）</label>
                                <label><input type="checkbox" id="post-agree" required /> 投稿ガイドラインに同意する</label>
                            </div>

                            <div class="post-actions">
                                <button type="button" id="post-preview" onclick="previewDeckPost()">プレビュー</button>
                                <button type="submit" id="post-submit" class="primary">投稿</button>
                                <span id="post-status" class="post-status"></span>
                            </div>
                        </div>

                        <!-- 送信用の隠しデータ（JSで埋める） -->
                        <input type="hidden" id="post-deck-code">
                        <input type="hidden" id="post-rep-img">
                        <input type="hidden" id="post-races-hidden">
                        <input type="hidden" id="post-types-hidden">
                    </form>
                </div>

            </div>
        </div>

    </div>

    <!-- 保存デッキ一覧表示用 -->
    <h3 id="saved-deck">保存デッキ一覧</h3>
    <div id="savedDeckCount"></div>
    <p class="saved-deck-massage">
        ⚠️ デッキはブラウザに保存されます。キャッシュを削除するとデータが消えるのでご注意ください。
    </p>
    <div id="savedDeckList"></div>

</div>



<footer>
    <div>
        <p>
            <strong>モスロギア</strong> はアプリ『神託のメソロギア』の非公式ファンサイトです。<br>
            カード一覧検索やデッキメーカー、デッキ分析などを通じて、プレイヤー向けに便利なデータベース機能を提供しています。
        </p>
    </div>

    <p>
        🔗 公式サイトはこちら 👉
        <a href="https://mythologiatheoracle.com/" target="_blank" rel="noopener noreferrer">
            神託のメソロギア公式サイト
        </a>
    </p>

    © 2025 Mesorogia Cards. All rights reserved.<br />
    当サイトは「神託のメソロギア」の非公式ファンサイトです。画像・データ等の著作権は各権利者に帰属します。<br />
    一部画像素材は「ジュエルセイバーFREE」<br />
    （<a href="https://www.jewel-s.jp/" target="_blank" rel="noopener">https://www.jewel-s.jp/</a>）を使用しています。<br />
    💬 ご要望・不具合報告 👉
    <a href="https://x.com/192837465aruneo" target="_blank" rel="noopener noreferrer">
        @192837465aruneo
    </a>
</footer>


<!-- JS -->
<script src="js/common.js"></script>
<script src="js/common-page12.js"></script>
<script src="js/common-page23.js"></script>
<script src="js/page2.js"></script>
</body>

</html>

